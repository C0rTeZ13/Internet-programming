<!DOCTYPE html>
<html lang="ru">
<head>
  <title></title>
</head>
<body>
<div id="output"></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  // Функция для извлечения ссылок
  import * as cheerio from "cheerio";

  function extractLinks(html) {
    const links = [];

    const $ = cheerio.load(html); // Добавляем загрузку Cheerio

    $('a').each(function() {
      const url = $(this).attr('href');
      const title = $(this).attr('title');
      const body = $(this).text();
      console.log(body);
      // Извлекаем ключ (url без протокола и параметров GET)
      const key = new URL(url).pathname.replace(/\/$/, '');

      // Добавляем ссылку в массив
      links.push({
        url: url,
        title: title || '',
        body: body || ''
      });
    });

    return links;
  }

  // Выполняем HTTP-запрос к главной странице miet.ru
  $.get('https://mail.ru', function(data) {
    // Извлекаем ссылки из полученного HTML
    const links = extractLinks(data);

    // Вставляем результат на HTML-страницу
    const outputDiv = $('#output');
    links.forEach(function(link) {
      const linkDiv = $('<div></div>');
      linkDiv.html('<p><strong>' + link.url + ' &rarr;</strong></p>' +
              '<p>URL: ' + link.url + '</p>' +
              '<p>Title: ' + link.title + '</p>' +
              '<p>Body: ' + link.body + '</p>');
      outputDiv.append(linkDiv);
    });
  });
</script>
</body>
</html>
